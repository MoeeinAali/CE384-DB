ما دارای روابط Person,Frequents,Eats,Serves هستیم. از این روابط استفاده کرده و خواسته مسئله را بدست می‌آوریم.
\subsection*{بخش 1}
در این بخش باید همه پیتزافروشی‌هایی را پیدا کنیم که حداقل یک مشتری بالای ۸۰ سال دارند.
\begin{itemize}	
	\item انتخاب افرادی که سن آن ها بالای ۸۰ سال است:
	
	\setLTR
	$Elderly = \sigma_{age \geq 80} (Person)$
	\setRTL
	\item پیدا کردن پیتزافروشی‌هایی که این افراد به آنها مراجعه کرده‌اند:
	
	\setLTR
	$ElderlyFrequents = Elderly \bowtie_{Person.ID=Frequents.personID} Frequents$
	\setRTL
	
	\item جدا کردن نام پیتزافروشی‌ها:
	
	\setLTR
	$Result = \prod_{pizzeria} (ElderlyFrequents)$
	\setRTL
\end{itemize}




\subsection*{بخش 2}
در این بخش باید همه پیتزا فروشی‌هایی را بیابیم که حداقل یک پیتزا را سرو می‌کنند که قیمتی زیر ۲۵۰ هزار
تومن دارد و فردی به نام عموحسن آن را میخورد.
\begin{itemize}	
	\item انتخاب پیتزافروشی‌هایی که حداقل یک پیتزا را با قیمت کمتر از ۲۵۰ هزار تومان سرو می‌کنند:
	
	\setLTR
	$CheapPizzas = \sigma_{price < 250000} (Serves)$
	\setRTL
	
	\item انتخاب افرادی که به نام "عموحسن" پیتزا می‌خورند: 
	
	\setLTR
	$Hassans = \sigma_{name = 'AmooHasan'} (Person)$
	\setRTL
	
	\item پیدا کردن پیتزافروشی‌هایی که "عموحسن" به آنها مراجعه می‌کند: 
	
	\setLTR
	$HassanFrequents = Hassan \bowtie_{Hassan.ID=Frequents.PersonID} Frequents$
	\setRTL
	
	\item پیدا کردن اشتراک پیتزافروشی‌هایی که حداقل یک پیتزا با قیمت کمتر از ۲۵۰ هزار تومان را سرو می‌کنند و "عموحسن" به آنها مراجعه می‌کند
	
	\setLTR
	$PizzaPlaces = \prod_{pizzeria} (HassanFrequents)$
	
	$CheapPizzasPlaces = \prod_{pizzeria} (CheapPizzas)$
	
	$Result = CheapPizzasPlaces \cap PizzaPlaces$
	\setRTL

\end{itemize}
\pagebreak

\subsection*{بخش 3}
در این بخش باید پیتزافروشی‌هایی که فقط مشتریان آقا یا فقط مشتریان خانم دارند را پیدا کنیم.
\begin{itemize}	
	\item جدا کردن مشتریان خانم وآقا:
	
	\setLTR
	$MaleCustomers = \sigma_{gender = 'male'} (Person)$
	
	$FemaleCustomers = \sigma_{gender = 'female'} (Person)$
	\setRTL
	
	\item پیدا کردن پیتزافروشی‌هایی که فقط مشتریان آقا را دارند:
	
		\setLTR
$MaleOnly = Frequents - (Frequents \ltimes_{Frequents.personID=MaleCustomers.ID} MaleCustomers)$

$MaleOnlyPizzerias = \prod_{pizzeria} (MaleOnly)$
	\setRTL
	
		\item پیدا کردن پیتزافروشی‌هایی که فقط مشتریان خانم را دارند:
	
	\setLTR
	$FemaleOnly = Frequents - (Frequents \ltimes_{Frequents.personID=FemaleCustomers.ID} FemaleCustomers)$
	
	$FemaleOnlyPizzerias = \prod_{pizzeria} (FemaleOnly)$
	\setRTL
	
	\item پیدا کردن اشتراک پیتزافروشی‌هایی که فقط مشتریان آقا یا فقط مشتریان خانم را دارند:
	
		\setLTR
	$Result = MaleOnlyPizzerias \cup FemaleOnlyPizzerias$
	\setRTL
	
	
\end{itemize}

\subsection*{بخش 4}
در این بخش باید آن افرادی که مشتری همه پیتزافروشی‌هایی که پیتزاهای مورد علاقه آن‌ها را دارد شناسایی کرد.
\begin{itemize}	
		\item
		ابتدا لیست پیتزافروشی‌هایی که حداقل یکی از غذاهای مورد علاقه هر فرد را دارند می‌سازیم:
		
	
	\setLTR
	$PizzeriasPersons =\prod_{Pzzeria,personID} (Serves \bowtie_{Serves.pizza = pizza}({Person \bowtie_{Person.ID=Eats.personID}Eats}))$
	\setRTL

	
	\item 
	در آخر از عملگر تقسیم استفاده کرده و خواسته سوال را بدست می‌آوریم:
	
	\setLTR
	$FrequentsName = \prod_{name,PersonID,Pizzeria}({Frequents \bowtie_{Frequents.personID=Person.ID} Person})$
	
	$Result = \prod_{name}(FrequentsName  \text{\textdiv}  PizzeriasPersons)$
	\setRTL
\end{itemize}

\subsection*{بخش 5}
در این بخش باید پیتزافروشی‌هایی را بیابیم که ارزان‌ترین پپرونی‌ها را دارند.
\begin{itemize}
	\item ابتدا ارزان‌ترین پپرونی را می‌یابیم:
	
	\setLTR
	$CheapestPrice = \prod_{price}(Serves) - \prod_{price}[\sigma_{P1.price>P2.price}[\rho_{P1}(Serves)\times\rho_{P2}(Serves)]]$
	\setRTL
	
	\item حال آن پیتزافروشی‌هایی که این پپرونی را می‌فروشند را پیدا می‌کنیم:
	
	\setLTR
	
	$\prod_{pizzeria}[\sigma_{pizza=pepperoni}(Serves)\bowtie_{Serves.price = CheapestPrice.price}CheapestPrice]$
	\setRTL
\end{itemize}